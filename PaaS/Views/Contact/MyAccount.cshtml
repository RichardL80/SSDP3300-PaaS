@model PaaS.ViewModels.MyAccountVM

@{
	ViewData["Title"] = "My Account";
	Layout = "~/Views/Shared/_Layout.cshtml";
	
}

<br />
<h1>My Account</h1>

<div class="account-wrapper">
	<div class="left-nav">
		<ul class="account-nav">
			<li><a href="/Contact/Personal Details">Personal Details</a></li>
			<li><a href="/Contact/MyOrders">Addressess</a></li>
			<li><a href="/Contact/MyWishlist">Order History</a></li>
			<li><a href="/Contact/MyProfile">Settings?</a></li>
			<li><form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                <button type="submit" class="nav-link btn btn-link text-dark">Logout</button>
            </form></li>
		</ul>
	</div>
	<div class="account-content">
		<section id="personal-details">
			<div class="section-header">
				<h2>Personal Details</h2>
				<a asp-action="EditDetails" asp-route-userId="@Model.ContactInfo.FirstOrDefault()?.UserId">Edit</a>
			</div>
			<div class="details-content">
				<ul>
					<li><span>Name:</span> <span>@Model.ContactInfo.FirstOrDefault()?.FirstName</span> <span>@Model.ContactInfo.FirstOrDefault()?.LastName</span></li>
					<li><span>Email:</span> @Model.ContactInfo.FirstOrDefault()?.Email</li>
					<li><span>Phone:</span> @Model.ContactInfo.FirstOrDefault()?.Phone</li>
				</ul>
			</div>
		</section>
		<section id="addresses">
			<div class="section-header">
				<h2>Addresses</h2>
				<a asp-action="AddAddress" asp-route-userId="@Model.ContactInfo.FirstOrDefault()?.UserId">+ Add New</a>
			</div>
			<div class="addresses-content">
				@foreach (var item in Model.ContactInfo)
				{
					<div class="address">
						<ul>
							<li>@item.Address1</li>
							<li>@item.Address2</li>
							<li><span>@item.CityName</span>, <span>@item.ProvinceName</span></li>
						</ul>
						<a asp-action="EditAddress" asp-route-contactId="@item.ContactId">Edit</a>
						<a asp-action="DeleteAddress" asp-route-contactId="@item.ContactId">Delete</a>
					</div>
				}
				
			</div>
		</section>
		<section id="order-history">
			<div class="section-header">
				<h2>Order History</h2>
				@foreach (var item in Model.Orders)
				{
					<div class="order">
						<ul>
							<li><span>Order ID:</span> @item.OrderId</li>
							<li><span>Order Date:</span> @item.OrderDate</li>
							<li><span>Order Total:</span> @item.TotalAmount</li>
						</ul>
						<a asp-action="OrderDetails" asp-route-orderId="@item.OrderId">View Details</a>
					</div>
				}
			</div>
		</section>
	</div>
</div>
